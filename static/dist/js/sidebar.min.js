$(function(){$(".sidebar .top ul li").on("mouseenter",function(a){a.target.tagName,$(this).parent().find("a").removeClass("cur"),$(this).children("a").addClass("cur");var t=$(this).parents(".top").next(),i=0;switch(t.children().removeClass("hidden").hide(),$(this).attr("class")){case"first":t.children(".first").show(),i="18px";break;case"second":t.children(".second").show(),i="114px";break;case"last":t.children(".last").show(),i="210px"}$(this).parents(".top").children(".bar").animate({left:i},"fast")});var a=function(a,t,i){return""==a?a=isHttps?"https://secure.gravatar.com/avatar/"+md5(t)+"?s="+i:"http://gravatar.com/avatar/"+md5(t)+"?s="+i:0==a.indexOf("http")?a+="&s="+i:a=cdnDomain+"avatar/"+a+"?imageView2/2/w/"+i,a};emojify.setConfig({only_crawl_id:null,img_dir:SG.EMOJI_DOMAIN,ignored_tags:{SCRIPT:1,TEXTAREA:1,A:1,PRE:1,CODE:1}});var t=function(t,i){if(t.ok){t=t.data;var e="";for(var s in t){var n=a(t[s].avatar,t[s].email,48);e+='<li\tclass="pull-left"><div class="avatar"><a href="/user/'+t[s].username+'" title="'+t[s].username+'"><img alt="'+t[s].username+'" class="img-circle" src="'+n+'" width="48px" height="48px"></a></div><div class="name" style="white-space: nowrap;"><a style="word-break: normal;" href="/user/'+t[s].username+'" title="'+t[s].username+'">'+t[s].username+"</a></div></li>"}$(".sb-content "+i+" ul").html(e)}},i={"/topics/recent":{func:function(a){if(a.ok){a=a.data;var t="";for(var i in a)t+='<li class="truncate"><i></i><a href="/topics/'+a[i].tid+'?fr=sidebar" title="'+a[i].title+'">'+a[i].title+"</a></li>";$(".sb-content .topic-list ul").html(t)}},class:".topic-list"},"/articles/recent":{func:function(a){if(a.ok){a=a.data;var t="";for(var i in a)t+='<li class="truncate"><i></i><a href="/articles/'+a[i].id+'?fr=sidebar" title="'+a[i].title+'">'+a[i].title+"</a></li>";$(".sb-content .article-list ul").html(t)}},class:".article-list"},"/projects/recent":{func:function(a){if(a.ok){a=a.data;var t="";for(var i in a){var e=a[i].id;""!=a[i].uri&&(e=a[i].uri);var s=a[i].category+" "+a[i].name;t+='<li><a href="/p/'+e+'"><div class="logo"><img src="'+a[i].logo+'" alt="'+a[i].name+'" width="48px"/></div></a><div class="title"><h4><a href="/p/'+e+'?fr=sidebar" title="'+s+'">'+s+"</a></h4></div></li>"}$(".sb-content .project-list ul").html(t)}},class:".project-list"},"/resources/recent":{func:function(a){if(a.ok){a=a.data;var t="";for(var i in a)t+='<li class="truncate"><i></i><a href="/resources/'+a[i].id+'?fr=sidebar" title="'+a[i].title+'">'+a[i].title+"</a></li>";$(".sb-content .resource-list ul").html(t)}},class:".resource-list"},"/comments/recent":{func:function(t){if(t.ok){var i=(t=t.data).comments,e="";for(var s in i){var n=i[s].objinfo.uri+i[s].objid,r=t[i[s].uid],l=a(r.avatar,r.email,40),c=SG.timeago(i[s].ctime);c==i[s].ctime&&(c=c.split(" ")[0]),e+='<li><div class="pic"><a href="/user/'+r.username+'" target="_blank"><img src="'+l+'" alt="'+r.username+'" width="40px" height="40px"></a></div><div class="word"><div class="w-name"><a href="/user/'+r.username+'" target="_blank" title="'+r.username+'">'+r.username+'</a><span title="'+i[s].ctime+'">'+c+'</span></div><div class="w-page"><span>在 <a href="'+n+'#commentForm" title="'+i[s].objinfo.title+'">'+i[s].objinfo.title+'</a> 中评论</span></div><div class="w-comment"><span>'+i[s].content+"</span></div></div></li>"}$(".sb-content .cmt-list ul").html(e),emojify.run($(".sb-content .cmt-list ul").get(0))}},class:".cmt-list"},"/users/active":{func:function(a){t(a,"#active-list")},class:"#active-list"},"/users/newest":{func:function(a){t(a,"#newest-list")},class:"#newest-list"},"/websites/stat":{func:function(a){if(a.ok){var t="<li>会员数: <span>"+(a=a.data).user+"</span> 人</li>";a.topic>0&&(t+="<li>主题数: <span>"+a.topic+"</span> 个</li>"),a.article>0&&(t+="<li>文章数: <span>"+a.article+"</span> 篇</li>"),a.comment>0&&(t+="<li>回复数: <span>"+a.comment+"</span> 条</li>"),a.resource>0&&(t+="<li>资源数: <span>"+a.resource+"</span> 个</li>"),a.project>0&&(t+="<li>项目数: <span>"+a.project+"</span> 个</li>"),a.book>0&&(t+="<li>图书数: <span>"+a.book+"</span> 本</li>"),$(".sb-content .stat-list ul").html(t)}},class:".stat-list"},"/readings/recent":{func:function(a){if(a.ok){if(!(a=a.data)||0==a.length)return void $(".sb-content .reading-list").parents(".sidebar").hide();var t="";if(1==a.length)t='<li><a href="/readings/'+(a=a[0]).id+'" target="_blank">'+a.content+"</a></li>";else for(var i in a)t+='<li><a href="/readings/'+a[i].id+'"><div class="time"><span>10-25</span></div></a><div class="title"><h4><a href="/readings/'+a[i].id+'">'+a[i].content+"</a></h4></div></li>";$(".sb-content .reading-list ul").html(t)}},class:".reading-list"},"/nodes/hot":{func:function(a){if(a.ok){if(null==(a=a.data))return;var t="";for(var i in a)t+='<li><a href="/go/'+a[i].ename+'?fr=sidebar" title="'+a[i].name+'">'+a[i].name+"</a></li>";$(".sb-content .node-list ul").html(t)}},class:".node-list"},"/friend/links":{func:function(a){if(a.ok){if(null==(a=a.data))return;var t="";for(var i in a)t+='<li style="margin-left:15px; margin-bottom:5px;"><a href="'+a[i].url+'" target="_blank" title="'+a[i].name+'">'+a[i].name+"</a></li>";$(".sb-content .friendslink-list ul").html(t)}},class:".friendslink-list"},"/rank/view":{func:function(a,t){if(a.ok){data=a.data;var i=data.list,e="";for(var s in i){var n=data.path+i[s].id,r=i[s].title;switch(data.objtype){case 0:n=data.path+i[s].tid;break;case 4:r=i[s].category+i[s].name,""!=i[s].uri&&(n=data.path+i[s].uri);break;case 5:r=i[s].name}var l=parseInt(s,10)+1,c="";c=l<4?'<img src="'+cdnDomain+"static/img/rank_medal"+l+'.png" width="20px">':"<em>"+l+"</em>",e+="<li>"+c+'<a href="'+n+'?fr=sidebar" title="'+r+'">'+r+"</a> - "+i[s].rank_view+" 阅读</li>"}$(".sb-content .rank-list").each(function(a){$(this).data("objtype")==data.objtype&&$(this).data("rank_type")==data.rank_type&&$(this).children().html(e)})}},class:".rank-list",data_keys:["objtype","rank_type"]}};if(void 0!==SG.SIDE_BARS)for(var e in SG.SIDE_BARS)if(void 0!==i[SG.SIDE_BARS[e]]){var s=i[SG.SIDE_BARS[e]],n=$(".sidebar .sb-content "+s.class);if(0==n.length)continue;if(!s.data_keys){var r=n.data("limit");""==r&&(r=10),$.ajax({type:"get",url:SG.SIDE_BARS[e],data:{limit:r},dataType:"json",success:s.func,ifModified:!0});continue}n.each(function(a){var t={limit:$(this).data("limit")};for(var i in s.data_keys){var n=s.data_keys[i];t[n]=$(this).data(n)}$.ajax({type:"get",url:SG.SIDE_BARS[e],data:t,dataType:"json",success:s.func,ifModified:!0})})}});